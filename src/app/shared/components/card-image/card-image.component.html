<section class="company-story">
  <mat-card>
    <div class="story-content">
      <div class="story-text">
        @if (origen === 'home') {
        <p class="h3">
          Aliarse con el Fondo Mixto
          <br class="d-sm-block" />

          <strong class="nombre-empresa"> D O N M A T Í A S </strong>
        </p>

        <p class="fs-5">
          Es dar un paso seguro hacia el desarrollo
          <br class="d-none d-sm-block" />
          <strong>Eficiente, Transparente y con Impacto real</strong>.
        </p>

        } @if (origen !== 'home') {
        <h2>{{ titulo }}</h2>

        <p>
          Fundada en 2010, comenzamos con una simple misión: ayudar a las
          empresas a prosperar en la era digital. A lo largo de los años, hemos
          crecido desde un pequeño equipo de innovadores apasionados hasta
          convertirnos en una fuerza líder en soluciones empresariales.
        </p>
        <p>
          Nuestro viaje ha estado marcado por el aprendizaje continuo, la
          adaptación y el compromiso con la excelencia. Hemos ayudado a cientos
          de empresas a transformar sus operaciones y alcanzar sus objetivos.
        </p>
        }
      </div>
      <div class="story-image">
        <div
          class="placeholder-image"
          [class.loaded]="imageLoaded"
          [class.error]="imageError"
        >
          <!-- Loading skeleton while image loads -->
          <div class="image-skeleton" *ngIf="!imageLoaded && !imageError">
            <div class="skeleton-animation"></div>
            <div class="loading-text">Cargando imagen...</div>
          </div>

          <!-- Image container -->
          <picture *ngIf="imagen">
            <!-- WebP format for modern browsers -->
            <source
              [srcset]="getOptimizedImageSrc()"
              type="image/webp"
              *ngIf="isWebPFormat()"
            />
            <!-- Main image -->
            <img
              [src]="getOptimizedImageSrc()"
              class="imagen"
              [alt]="getAltText()"
              loading="lazy"
              decoding="async"
              (error)="onImageError($event)"
              (load)="onImageLoad($event)"
              [class.loaded]="imageLoaded"
              [class.error-state]="imageError"
            />
          </picture>

          <!-- Fallback content when no image is provided -->
          <div class="no-image-placeholder" *ngIf="!imagen">
            <mat-icon>image</mat-icon>
            <p>Imagen no disponible</p>
          </div>
        </div>
      </div>
    </div>
  </mat-card>
</section>
